<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/admin/admin__base.css' )}}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/admin/base.css' )}}">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/admin/admin_property.css' )}}">
    <link rel="stylesheet" href="{{ url_for('static',filename='fonts/fontawesome-free-6.4.0-web/css/all.css' )}}">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.min.css">

    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/2.1.8/js/dataTables.min.js"></script>

    <title>Admin</title>

    <style>
        .dt-header,
        .dt-info {
            font-size: 1.6rem;
        }
    </style>

    <script>
        /* ============================
           1. Toggle form thêm
        ============================= */
        function addPropertyForm() {
            const form = document.getElementById("addPropertyForm");
            const table = document.getElementById("table-container");

            form.style.display = form.style.display === "block" ? "none" : "block";
            table.style.display = table.style.display === "none" ? "block" : "none";
        }

        /* ============================
           2. Toggle form sửa
        ============================= */
        function editPropertyForm() {
            const form = document.getElementById("editPropertyForm");
            const table = document.getElementById("table-container");

            form.style.display = form.style.display === "block" ? "none" : "block";
            table.style.display = table.style.display === "none" ? "block" : "none";
        }

        /* ============================
           3. Menu admin
        ============================= */
        document.addEventListener('DOMContentLoaded', function () {
            const navUser = document.querySelector('.nav__admin');
            const dropdownMenu = document.querySelector('.nav__form-admin');

            navUser.addEventListener('click', function (event) {
                event.stopPropagation();
                dropdownMenu.style.display =
                    dropdownMenu.style.display === 'block' ? 'none' : 'block';
            });

            document.addEventListener('click', function (event) {
                if (!navUser.contains(event.target) && !dropdownMenu.contains(event.target)) {
                    dropdownMenu.style.display = 'none';
                }
            });
        });
    </script>

</head>

<body>
<div class="admin">

    {% include 'admin/header.html' %}

    <div class="container">
    {% include 'admin/sidebar.html' %}


        <!-- Table Section -->
        <div id="table-container">
            <h3>Quản lý bài đăng</h3>
            <div class="property_management">

                <table id="propertyTable">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Tên bài đăng</th>
                        <th>Ngày đăng</th>
                        <th>Thao tác</th>
                    </tr>
                    </thead>

                    <tbody>
                    </tbody>
                </table>

            </div>
        </div>

        <!-- Form thêm -->
        <div id="addPropertyForm" style="display: none;">
            <h3 class="form__title">Thêm bài đăng</h3>
            <form class="form__content">

                <div class="form__item">
                    <label for="classifyAdd">Phân loại</label>
                    <select name="classify" id="classifyAdd">
                        <option value="type">Hình thức làm việc</option>
                        <option value="job">Ngành nghề</option>
                        <option value="level">Cấp bậc</option>
                    </select>
                </div>

                <div class="form__item">
                    <label for="classify_name_add">Tên Ngành nghề :</label>
                    <input type="text" id="classify_name_add" name="classify_name" required>
                </div>

                <div class="form__bottom">
                    <button class="form__submit" type="submit">Lưu</button>
                    <a href="javascript:void(0)" onclick="addPropertyForm()" class="form__back">
                        <i class="fa-solid fa-arrow-left"></i>
                        Quay lại
                    </a>
                </div>
            </form>
        </div>

        <!-- Form sửa -->
        <div id="editPropertyForm" style="display: none;">
            <h3 class="form__title">Chỉnh sửa thông tin bài đăng</h3>
            <form class="form__content">

                <div class="form__item">
                    <label for="classifyEdit">Phân loại</label>
                    <select name="classify" id="classifyEdit">
                        <option value="type">Hình thức làm việc</option>
                        <option value="job">Ngành nghề</option>
                        <option value="level">Cấp bậc</option>
                    </select>
                </div>

                <div class="form__item">
                    <label for="classify_name_edit">Tên Ngành nghề :</label>
                    <input type="text" id="classify_name_edit" name="classify_name" required>
                </div>

                <div class="form__bottom">
                    <button class="form__submit" type="submit">Lưu</button>
                    <a href="javascript:void(0)" onclick="editPropertyForm()" class="form__back">
                        <i class="fa-solid fa-arrow-left"></i>
                        Quay lại
                    </a>
                </div>
            </form>
        </div>

    </div>
</div>

<!-- DataTable init -->
<script>
    $(document).ready(function () {
        let table = $('#propertyTable').DataTable();

        // Thêm class đẹp cho phần length
        $('.dataTables_length').addClass('dt-header');
          $('.dt-layout-end').append(
            '<a href="/admin/add-property" class="">Thêm mới</a>'
        );
    });
</script>

</body>
</html>
